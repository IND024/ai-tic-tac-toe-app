import React, { useEffect, useState } from 'react';

interface AdOverlayProps {
  duration: number; // in ms
  onComplete: () => void;
}

const AdOverlay: React.FC<AdOverlayProps> = ({ duration, onComplete }) => {
    const [progress, setProgress] = useState(100);

    useEffect(() => {
        // рдпрд╣ рдПрдХ рд╕рд┐рдореБрд▓реЗрд╢рди рд╣реИред рдЕрд╕рд▓реА рд╡рд┐рдЬреНрдЮрд╛рдкрди рдореЗрдВ, рдЖрдк SDK рдХреЗ 'ad closed' рдпрд╛ 'ad dismissed'
        // рдЗрд╡реЗрдВрдЯ рдкрд░ onComplete() рдХреЛ рдХреЙрд▓ рдХрд░реЗрдВрдЧреЗред рдпрд╣ рдЯрд╛рдЗрдорд░ рд╕рд┐рд░реНрдл рдПрдХ рд╕рд┐рдореБрд▓реЗрд╢рди рд╣реИ рдФрд░ рдЗрд╕реЗ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред
        const timer = setTimeout(onComplete, duration);

        const interval = setInterval(() => {
            setProgress(prev => Math.max(0, prev - (100 / (duration / 100))));
        }, 100);

        return () => {
            clearTimeout(timer);
            clearInterval(interval);
        };
    }, [duration, onComplete]);

    return (
        <div 
            className="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 transition-opacity duration-300"
            role="dialog"
            aria-modal="true"
            aria-label="Advertisement"
        >
            <div className="bg-gray-900 p-8 rounded-xl shadow-2xl border border-yellow-500/50 w-full max-w-md text-center transform scale-100 transition-transform duration-300">
                {/* 
                    =============================================================================
                    == AdSense/AdMob рдЗрдВрдЯрд░рд╕реНрдЯреАрд╢рд┐рдпрд▓ рд╡рд┐рдЬреНрдЮрд╛рдкрди рдХреЛрдб рдпрд╣рд╛рдБ рд▓рд╛рдЧреВ рдХрд░реЗрдВ ==
                    =============================================================================
                    рдпрд╣ рдПрдХ рдЗрдВрдЯрд░рд╕реНрдЯреАрд╢рд┐рдпрд▓ (рдлреБрд▓-рд╕реНрдХреНрд░реАрди) рд╡рд┐рдЬреНрдЮрд╛рдкрди рдХреЗ рд▓рд┐рдП рдкреНрд▓реЗрд╕рд╣реЛрд▓реНрдбрд░ рд╣реИред
                    
                    --- рд╣рд┐рдиреНрджреА рдореЗрдВ рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг ---
                    рдЗрдВрдЯрд░рд╕реНрдЯреАрд╢рд┐рдпрд▓ рд╡рд┐рдЬреНрдЮрд╛рдкрди рдПрдХ рдлреБрд▓-рд╕реНрдХреНрд░реАрди рд╡рд┐рдЬреНрдЮрд╛рдкрди рд╣реЛрддрд╛ рд╣реИ рдЬреЛ рдРрдк рдХреЗ рд╕рд╛рдорд╛рдиреНрдп рдкреНрд░рд╡рд╛рд╣ рдХреЗ рдмреАрдЪ рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗрддрд╛ рд╣реИ,
                    рдЬреИрд╕реЗ рдПрдХ рд▓реЗрд╡рд▓ рдкреВрд░рд╛ рд╣реЛрдиреЗ рдХреЗ рдмрд╛рджред
                    
                    - AdMob рдХреА рддрд░рд╣, рдЗрд╕ рдЗрдВрдЯрд░рд╕реНрдЯреАрд╢рд┐рдпрд▓ рд╡рд┐рдЬреНрдЮрд╛рдкрди рдХреА рднреА рдЕрдкрдиреА рдПрдХ рдЕрд▓рдЧ 'Ad Unit ID' рд╣реЛрддреА рд╣реИред
                    - рдЖрдкрдХреЛ AdSense/AdMob рдбреИрд╢рдмреЛрд░реНрдб рдореЗрдВ рдПрдХ рдирдИ 'Ad Unit' рдмрдирд╛рдиреА рд╣реЛрдЧреА рдФрд░ рдЙрд╕рдХреА ID рдпрд╣рд╛рдБ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░рдиреА рд╣реЛрдЧреАред

                    ЁЯУМ рдЕрд╕рд▓реА рд╡рд┐рдЬреНрдЮрд╛рдкрди рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП:
                    1. рдЬрдм рдпрд╣ рдХрдВрдкреЛрдиреЗрдВрдЯ рджрд┐рдЦрд╛рдпрд╛ рдЬрд╛рдП (рдЬреИрд╕реЗ `useEffect` рдореЗрдВ), рддреЛ AdSense/AdMob рдХреЗ рдлрдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдХрд░рдХреЗ рд╡рд┐рдЬреНрдЮрд╛рдкрди рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░реЗрдВ рдФрд░ рджрд┐рдЦрд╛рдПрдВред
                       рд╡реЗрдм рдХреЗ рд▓рд┐рдП, рдпрд╣ рдЖрдорддреМрд░ рдкрд░ рдПрдХ рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдлрдВрдХреНрд╢рди рд╣реЛрддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рдЖрдк рдЕрдкрдиреА Ad Unit ID рдХреЗ рд╕рд╛рде рдХреЙрд▓ рдХрд░рддреЗ рд╣реИрдВред
                        
                    2. рд╡рд┐рдЬреНрдЮрд╛рдкрди рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ SDK рд╕реЗ 'ad closed' (рд╡рд┐рдЬреНрдЮрд╛рдкрди рдмрдВрдж рд╣реЛрдиреЗ рд╡рд╛рд▓рд╛) рдЗрд╡реЗрдВрдЯ рд╕реБрдиреЗрдВред
                    
                    3. рдЬрдм рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди рдмрдВрдж рдХрд░ рджреЗ, рддреЛ `onComplete()` рдлрдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдХрд░реЗрдВ рддрд╛рдХрд┐ рдЧреЗрдо рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рд╣реЛ рд╕рдХреЗред
                    
                    рдпрд╣ рдореМрдЬреВрджрд╛ UI рдФрд░ рдЯрд╛рдЗрдорд░ рд╕рд┐рд░реНрдл рдПрдХ рд╕рд┐рдореБрд▓реЗрд╢рди рд╣реИред рдЕрд╕рд▓реА рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдореЗрдВ, рд╡рд┐рдЬреНрдЮрд╛рдкрди рдиреЗрдЯрд╡рд░реНрдХ рдЕрдкрдирд╛ рдЦреБрдж рдХрд╛ UI рджрд┐рдЦрд╛рдПрдЧрд╛,
                    рдФрд░ рдЖрдкрдХреЛ рдЙрд╕реЗ рджрд┐рдЦрд╛рдиреЗ рдФрд░ рдмрдВрдж рд╣реЛрдиреЗ рдкрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдирдХреЗ рдХреЛрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред
                */}
                <h3 className="text-3xl font-black text-amber-400 mb-4">Advertisement</h3>
                <p className="text-gray-300 mb-6">Your game will resume shortly.</p>
                <div className="w-full bg-gray-700 rounded-full h-2.5">
                    <div className="bg-amber-400 h-2.5 rounded-full" style={{ width: `${progress}%`, transition: 'width 0.1s linear' }}></div>
                </div>
            </div>
        </div>
    );
};

export default AdOverlay;